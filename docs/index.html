<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Disqus Quality of Life Tools</title>
</head>
<body>
  <h1>Disqus Quality of Life Tools</h1>
  <h2>A collection of utilities to make commenting easier on the Disqus platform.</h2>
  <section class="tools">
  <article class="tool-item">
    <h3>Parse Article Bookmarklet</h3>
    <p>Analyzes an article's metadata (title, url, provider, and description), copying it to the clipboard in a comment-ready format. Note that the 'description' text will be the currently selected (highlighted) text on the page, if any is detected.</p>
    <div class="tool-item-resources">
      <a id="ParseArticleBookmarkletLink" href="javascript:(function(){function%20a(a,b){return%20new%20URL(b,a).href}function%20b(a){return%20new%20URL(a).host}function%20c(a){return%20a.replace(/www[a-zA-Z0-9]*\./,%22%22).replace(%22.co.%22,%22.%22).split(%22.%22).slice(0,-1).join(%22%20%22)}function%20d(a){return(b,c)=%3E{let%20d,e=0;for(let%20f=0;f%3Ca.rules.length;f++){const[c,g]=a.rules[f],h=a.rules.length-f;let%20i;if(c){const%20a=Array.from(b.querySelectorAll(c));a[0]%26%26(i=g(a[0]))}else%20i=g();(h%3Ee||!d)%26%26(e=h,d=i)}if(!d%26%26a.defaultValue%26%26(d=a.defaultValue(c)),d){if(a.processors)for(const%20b%20of%20a.processors)d=b(d,c);return%20d.trim%26%26(d=d.trim()),d}}}function%20e(a,b){const%20c={},e={url:b};return%20Object.keys(f).map(b=%3E{const%20g=f[b],h=d(g);c[b]=h(a,e)}),c}const%20f={description:{rules:[[null,()=%3E{let%20a=document.getSelection();return%20a%3Fa.toString():%22%22}],[%22meta[property%20=\%22og:description\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22meta[name%20=\%22description\%22%20i]%22,a=%3Ea.getAttribute(%22content%22)]]},title:{rules:[[%22meta[property%20=\%22og:title\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22meta[name%20=\%22twitter:title\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22meta[property%20=\%22twitter:title\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22meta[name%20=\%22hdl\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22title%22,a=%3Ea.text]]},url:{rules:[[%22link[rel%20=\%22canonical\%22]%22,a=%3Ea.getAttribute(%22href%22)],[%22meta[property%20=\%22og:url\%22]%22,a=%3Ea.getAttribute(%22content%22)]],defaultValue:a=%3Ea.url,processors:[(b,c)=%3Ea(c.url,b)]},provider:{rules:[[%22meta[property%20=\%22og:site_name\%22]%22,a=%3Ea.getAttribute(%22content%22)],[%22meta[property%20=\%22twitter:site\%22]%22,a=%3Ea.getAttribute(%22content%22)]],defaultValue:a=%3Ec(b(a.url))}};(function(a){var%20b=document.createElement(%22textarea%22),c=document.getSelection();b.textContent=a,document.body.appendChild(b),c.removeAllRanges(),b.select(),document.execCommand(%22copy%22),c.removeAllRanges(),document.body.removeChild(b)})(function(a,b){let%20c=e(a,b);return`%3Ca%20href%20=%22${c.url}%22%3E(%3Cstrong%3E${c.provider}%3C/strong%3E)%20${c.title}%3C/a%3E%3Cblockquote%3E%22${c.description}%22%3C/blockquote%3E`}(document,document.location.href))})();)">Drag Me to Bookmarks</a>
      <button onclick="copy(document.getElementById('ParseArticleBookmarkletLink').getAttribute('href'))">Copy to Clipboard</button>
      <a href="https://github.com/SaragossaManuscript/disqus-qol/src/parseArticleBookmarklet.js">Source Code</a>
  </div>
    
  </article>
</section>
  <script>
    async function copy(value) { await navigator.clipboard.writeText(value) }
  </script>
  <style>
    body {
      margin: 0 auto;
      width: 800px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
    }
    h1 { 
      text-decoration: underline;
    }
    p {
      line-height: 1.3em;
    }
    .tools {
      margin: 8px;
      border: 1px dotted #333;
      border-radius: 4px;
      padding: 0px 6px 12px 6px;
    }
    .tool-item > h3 {
        font-variant: small-caps;
        font-weight: bold;
    }
    .tool-item-resources {
      display: flex;
      justify-content: space-evenly;
      align-items: baseline;
    }
    .tool-item-resources.a, .tool-item-resources.button {
      display: block;
    }
  </style>
</body>
</html>
